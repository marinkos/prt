const textEl=document.querySelector('[wb-data="text"]'),splitText=new SplitType(textEl,{types:"lines"});gsap.set(textEl,{autoAlpha:1}),gsap.from(splitText.lines,{autoAlpha:0,lineHeight:"3em",duration:1.5});const canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),links=[...document.querySelectorAll(".project_item")];function lerp(e,t,s){return e*(1-s)+t*s}let imgIndex=0;const images=["https://cdn.prod.website-files.com/60f007b4ffba6aa104bcca7c/66ec4eac5f629c4d9039b98a_vocai.avif","https://uploads-ssl.webflow.com/60f007b4ffba6aa104bcca7c/653927b984b0ce3e4fb60d0e_ss.webp","https://uploads-ssl.webflow.com/60f007b4ffba6aa104bcca7c/65392a1b7e50ad39963dc626_rs.webp","https://cdn.prod.website-files.com/60f007b4ffba6aa104bcca7c/66dac944c9fd3bbdefaf0feb_coastal.avif","https://uploads-ssl.webflow.com/60f007b4ffba6aa104bcca7c/64c3f384562524d89fe25ed6_bn.webp","https://uploads-ssl.webflow.com/60f007b4ffba6aa104bcca7c/64c3f384fcdee9a3a646734c_fq.webp","https://uploads-ssl.webflow.com/60f007b4ffba6aa104bcca7c/64c3f384562524d89fe25e89_ct.webp","https://cdn.prod.website-files.com/60f007b4ffba6aa104bcca7c/6756768053dc4e4e07dbcb0a_eon.avif","https://cdn.prod.website-files.com/60f007b4ffba6aa104bcca7c/66ec5059a9c617332c05a46b_amiti.avif",];let imgArr=[],targetX=0,targetY=0,currentX=0,currentY=0;window.addEventListener("mousemove",e=>{targetX=e.clientX,targetY=e.clientY}),images.forEach((e,t)=>{let s=new Image(300);s.src=e,s.classList.add("project-image"),document.body.append(s),imgArr.push(s)});let percent=.001,target=0;function drawImage(e){let{width:t,height:s}=imgArr[e].getBoundingClientRect();canvas.width=t*window.devicePixelRatio,canvas.height=s*window.devicePixelRatio,canvas.style.width=`${t}px`,canvas.style.height=`${s}px`,ctx.webkitImageSmoothingEnabled=!1,ctx.mozImageSmoothingEnabled=!1,ctx.msSmoothingEnabled=!1,ctx.imageSmoothingEnabled=!1,1===target?percent<.2?percent+=.01:percent<1&&(percent+=.1):0===target&&(percent>.2?percent-=.3:percent>0&&(percent-=.01));let a=t*percent,n=s*percent;percent>=1?(ctx.scale(window.devicePixelRatio,window.devicePixelRatio),ctx.drawImage(imgArr[e],0,0,t,s)):(ctx.drawImage(imgArr[e],0,0,a,n),ctx.scale(window.devicePixelRatio,window.devicePixelRatio),0!==canvas.width&&0!==canvas.height&&ctx.drawImage(canvas,0,0,a,n,0,0,t,s))}for(let i=0;i<links.length;i++)links[i].addEventListener("mouseover",()=>{for(let e=0;e<links.length;e++)e!==i?(links[e].style.opacity=.2,links[e].style.zIndex=0):(links[e].style.opacity=1,links[e].style.zIndex=3)}),links[i].addEventListener("mouseleave",()=>{for(let e=0;e<links.length;e++)links[e].style.opacity=1}),links[i].addEventListener("mouseenter",()=>{imgIndex=i,target=1}),links[i].addEventListener("mouseleave",()=>{target=0});function animate(){currentX=lerp(currentX,targetX,.075),currentY=lerp(currentY,targetY,.075);let{width:e,height:t}=imgArr[imgIndex].getBoundingClientRect();canvas.style.transform=`translate3d(${currentX-e/2}px, ${currentY-t/2}px, 0)`,drawImage(imgIndex),window.requestAnimationFrame(animate)}animate();const cursor=document.getElementById("cursor"),amount=20,sineDots=Math.floor(6),width=26,idleTimeout=150;let lastFrame=0,mousePosition={x:0,y:0},dots=[],timeoutID,idle=!1,hoverButton,hoverTL;class Dot{constructor(e=0){this.index=e,this.anglespeed=.05,this.x=0,this.y=0,this.scale=1-.05*e,this.range=13-13*this.scale+2,this.limit=19.5*this.scale,this.element=document.createElement("span"),TweenMax.set(this.element,{scale:this.scale}),cursor.appendChild(this.element)}lock(){this.lockX=this.x,this.lockY=this.y,this.angleX=2*Math.PI*Math.random(),this.angleY=2*Math.PI*Math.random()}draw(e){!idle||this.index<=sineDots||(this.angleX+=this.anglespeed,this.angleY+=this.anglespeed,this.y=this.lockY+Math.sin(this.angleY)*this.range,this.x=this.lockX+Math.sin(this.angleX)*this.range),TweenMax.set(this.element,{x:this.x,y:this.y})}}function init(){window.addEventListener("mousemove",onMouseMove),window.addEventListener("touchmove",onTouchMove),lastFrame+=new Date,buildDots(),render()}function startIdleTimer(){timeoutID=setTimeout(goInactive,150),idle=!1}function resetIdleTimer(){clearTimeout(timeoutID),startIdleTimer()}function goInactive(){for(let e of(idle=!0,dots))e.lock()}function buildDots(){for(let e=0;e<20;e++){let t=new Dot(e);dots.push(t)}}const onMouseMove=e=>{mousePosition.x=e.clientX-13,mousePosition.y=e.clientY-13,resetIdleTimer()},onTouchMove=()=>{mousePosition.x=event.touches[0].clientX-13,mousePosition.y=event.touches[0].clientY-13,resetIdleTimer()},render=e=>{let t=e-lastFrame;positionCursor(t),lastFrame=e,requestAnimationFrame(render)},positionCursor=e=>{let t=mousePosition.x,s=mousePosition.y;dots.forEach((a,n,o)=>{let c=o[n+1]||o[0];if(a.x=t,a.y=s,a.draw(e),!idle||n<=sineDots){let l=(c.x-a.x)*.35,r=(c.y-a.y)*.35;t+=l,s+=r}})};init();const locoScroll=new LocomotiveScroll({el:document.querySelector(".main-wrapper"),smooth:!0,multiplier:.7});setTimeout(()=>{locoScroll.update()},1e3);