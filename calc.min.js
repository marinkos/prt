(()=>{var s={hourlyRate:70,profitMargin:.43,weeklyHours:25,pageComplexity:{simple:4,middling:8,complex:12},templateMultiplier:.4,interactions:{static:1,medium:1.15,complex:1.5},cmsHours:{blog:3,"case-studies":4,team:2,"open-roles":3,"help-center":5,services:4,podcast:4,other:6},integrationHours:{ga:.5,mailchimp:1,"hot-jar":1.5,hubspot:2,chat:1,paypal:3,other:4},timeline:{flexible:.9,standard:1,rush:1.4}},g={webhookUrl:"https://script.google.com/macros/s/AKfycbxE1khcBP3cYMrCQ4lqmYxsKDEYW2dsFLXBPETJarEXw6l6CqKzujku86KHfu0HdCx3/exec",enabled:!0};function b(e){let t=document.querySelector("#totalQuote"),i=parseFloat(t.textContent)||0;gsap.fromTo(t,{innerText:i},{duration:.3,innerText:e,ease:"power2.out",modifiers:{innerText:function(o){return Math.round(o*10)/10}}})}function k(){let e=$('input[name="complexity"]:checked').val()||"simple",t=parseInt($('input[name="unique"]').val())||1,i=parseInt($('input[name="template"]').val())||0,o=$('input[name="interactions"]:checked').val()||"static",a=$('input[name="timeline"]:checked').val()||"standard",c=s.pageComplexity[e],n=0;n+=t*c,n+=i*c*s.templateMultiplier,n*=s.interactions[o];let l=0;$('input[name="cms"]:checked').each(function(){let r=$(this).val();r!=="no"&&s.cmsHours[r]&&(l+=s.cmsHours[r])}),n+=l;let d=0;$('input[name="integrations"]:checked').each(function(){let r=$(this).val();r!=="no"&&s.integrationHours[r]&&(d+=s.integrationHours[r])}),n+=d;let m=n*s.hourlyRate,y=s.timeline[a],p=m*y,h=p*s.profitMargin,u=p+h;u=Math.max(u,500);let C=Math.ceil(n/s.weeklyHours);return{hours:Math.round(n*10)/10,cost:Math.round(u/100)*100,costInK:Math.round(u/100)/10,weeks:C,breakdown:{baseCost:Math.round(m),timelineAdjustment:Math.round(p-m),profit:Math.round(h),totalHours:Math.round(n*10)/10}}}function v(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function w(){return window.calculatorSessionId||(window.calculatorSessionId=v()),window.calculatorSessionId}function x(e){if(!g.enabled)return;e.sessionId=w();let t=new URLSearchParams;Object.keys(e).forEach(a=>{let c=Array.isArray(e[a])?e[a].join(","):e[a];t.append(a,c)});let i=document.createElement("script"),o="trackingCallback_"+Date.now();window[o]=function(a){console.log("Tracking success:",a),document.head.removeChild(i),delete window[o]},i.onerror=function(){console.error("Tracking error: JSONP request failed"),document.head.removeChild(i),delete window[o]},i.src=`${g.webhookUrl}?${t.toString()}&callback=${o}`,document.head.appendChild(i)}function f(e,t){let i={sessionId:w(),timestamp:new Date().toISOString(),triggerType:t,complexity:$('input[name="complexity"]:checked').val()||"",uniquePages:$('input[name="unique"]').val()||"",templatePages:$('input[name="template"]').val()||"",interactions:$('input[name="interactions"]:checked').val()||"",timeline:$('input[name="timeline"]:checked').val()||"",cmsOptions:$('input[name="cms"]:checked').map(function(){return this.value}).get(),integrationOptions:$('input[name="integrations"]:checked').map(function(){return this.value}).get(),estimatedHours:e.hours,estimatedCost:e.cost,estimatedWeeks:e.weeks,referrer:document.referrer||window.location.href};x(i),console.log("Tracking data:",i)}function I(){let e=!1,t=!1;function i(){let c=$('input[name="complexity"]:checked').length>0,n=parseInt($('input[name="unique"]').val())>0,l=$('input[name="interactions"]:checked').length>0;return c&&n&&l}function o(c){let n=k();if(!t&&n.cost<=500)return;i()&&!e?(f(n,"complete"),e=!0):t&&n.cost>500&&f(n,c)}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t&&o("exit")}),setTimeout(()=>{t&&o("time_spent")},3e4);let a=!1;return window.addEventListener("scroll",()=>{if(!t)return;let c=document.querySelector(".calc_component");if(!c)return;let n=c.getBoundingClientRect();!(n.bottom>0&&n.top<window.innerHeight)&&!a&&(a=!0,o("scroll_away"))}),{checkAndTrack:o,markInteraction:()=>{t=!0}}}function S(){if(!($('input[type="radio"]:checked').length>0||$('input[type="checkbox"]:checked').length>0||$('input[type="number"]').val()&&parseInt($('input[type="number"]').val())>0)){$("#totalQuote").text("0");return}window.trackingSetup&&window.trackingSetup.markInteraction();let t=k();b(t.costInK),window.trackingSetup&&window.trackingSetup.checkAndTrack("interaction"),console.log("Project Calculation:",t)}$(document).ready(function(){window.trackingSetup=I(),$("#totalQuote").text("0"),$('input[type="radio"], input[type="checkbox"], input[type="number"]').on("change input",function(){S()}),$(".answer_arrow").on("click",function(){let e=$(this).siblings('input[type="number"]'),t=$(this).hasClass("tp"),i=parseInt(e.val())||0,o;if(t)o=i+1;else{let a=parseInt(e.attr("min"))||0;o=Math.max(a,i-1)}e.val(o).trigger("change")})});})();
